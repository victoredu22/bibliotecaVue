(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd73acc4"],{"0484":function(e,t,a){},"3a94":function(e,t,a){"use strict";var o=a("0484"),n=a.n(o);n.a},"67b0":function(e,t,a){},7608:function(e,t,a){"use strict";var o=a("67b0"),n=a.n(o);n.a},d504:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 mb-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[e._m(0),a("p",{staticClass:"text-muted"},[e._v(" "+e._s(e.currentDateTime)+" ")])]),e._m(1)])])]),a("br"),a("headInfoPedido"),a("chartPedidos"),a("tablasStock",{staticClass:"mt-2 mb-2"})],1),a("div",{staticClass:"col-md-9"},[a("historialPedido")],1)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h4",[a("i",{staticClass:"fas fa-university"}),e._v(" Colegio Cumbres ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-5 ml-auto"},[a("div",[a("img",{staticClass:"img-fluid",attrs:{src:"https://im0-tub-com.yandex.net/i?id=a9ab8ad65c5e6b8d6f8d93d4749f84f3&n=13",alt:""}})])])}],r=(a("99af"),a("d81d"),a("96cf"),a("1da1")),i=a("5530"),s=a("2f62"),c=a("c1df"),d=a.n(c),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"header-title pb-2"},[e._v(" Historial de pedidos ")]),a("div",{staticClass:"row mb-2"},[e._m(0),a("div",{staticClass:"col-md-2 col-xs-2"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-nuevoPedido",modifiers:{"modal-nuevoPedido":!0}}],staticClass:"btnPedido",attrs:{variant:"outline-info"}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Crear pedido ")])],1)]),e.puSkeleton?a("PuSkeleton",{attrs:{count:5}}):a("div",[a("hr"),a("buscadorPedido"),a("cardPedido"),a("paginationPedido")],1),a("modalNuevoPedido")],1)])])])},u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-10 col-xs-10"},[a("label",{staticClass:"text-muted"},[e._v("A continuacion verás el listado de libros arrendados segun su fecha correspondiente. ")])])}],b=a("6f1d"),m=a("ea0e"),f=a("999c"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"modal-nuevoPedido"},on:{show:e.resetModal,ok:e.handleEnvio},scopedSlots:e._u([{key:"modal-title",fn:function(){return[a("h5",{staticClass:"modal-title"},[e._v("Creación nuevo pedido")])]},proxy:!0},{key:"modal-footer",fn:function(t){var o=t.ok;return[e.loadCargaPedido?a("b-button",{attrs:{block:"",variant:"primary"}},[a("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Cargando... ")],1):a("b-button",{attrs:{block:"",variant:"primary"},on:{click:function(e){return o()}}},[e._v(" Nuevo Pedido ")])]}}])},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body"},[e.msg.length>0?a("b-alert",{attrs:{show:"",variant:e.variant}},[e._v(" "+e._s(e.msg)+" ")]):e._e(),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Ingresa el rut del alumno."}},[a("v-select",{attrs:{placeholder:"Haz click para seleccionar alumno...",options:e.dataAlumnos,label:"dataAlumno"},on:{input:function(t){return e.seleccionAlumno(e.selectedAlumno)}},scopedSlots:e._u([{key:"options",fn:function(t){return[e._v(" "+e._s(t.dataAlumno)+" ")]}}]),model:{value:e.selectedAlumno,callback:function(t){e.selectedAlumno=t},expression:"selectedAlumno"}}),e.error.idAlumno?a("span",{staticStyle:{color:"red"}},[e._v(" Este "+e._s(e.error.idAlumno[0])+" ")]):e._e(),a("br"),e.infoAlumno.idAlumno?a("div",{staticStyle:{"background-color":"#EEEEEE","border-radius":"0.25rem",padding:"0.75rem 1.25rem"}},[a("p",[e._v(" Este alumno cuenta con "),a("strong",[e._v(e._s(e.cantidadLibros))]),e._v(" pedidos pendientes. ")]),a("p",[e._v(" #"+e._s(e.infoAlumno.idAlumno)+" - "+e._s(e.infoAlumno.nombre)+" "+e._s(e.infoAlumno.apellido)+" "+e._s(e.infoAlumno.numeroDocumento)+" ")])]):e._e()],1),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Ingresa el nombre del libro."}},[a("v-select",{staticClass:"form-select",attrs:{placeholder:"Haz click para seleccionar el libro...",options:e.jsonLibros,label:"dataLibro"},on:{input:function(t){return e.seleccionLibro(e.selectedLibro.idLibro)}},scopedSlots:e._u([{key:"options",fn:function(t){return[e._v(" "+e._s(t.dataLibro)+" ")]}}]),model:{value:e.selectedLibro,callback:function(t){e.selectedLibro=t},expression:"selectedLibro"}}),e.error.idLibro?a("span",{staticStyle:{color:"red"}},[e._v(" Este "+e._s(e.error.idLibro[0])+" ")]):e._e(),a("br"),e.infoLibro.idLibro?a("div",{staticStyle:{"background-color":"#EEEEEE","border-radius":"0.25rem",padding:"0.75rem 1.25rem"}},[e._v(" Este Libro se encuentra con stock de: "+e._s(e.infoLibro.cantidad)+" ")]):e._e()],1),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Fecha Entrega"}},[a("b-calendar",{attrs:{locale:"es",block:""},on:{context:e.onContext,input:function(t){return e.cickCalendario()}},model:{value:e.fechaEntrega,callback:function(t){e.fechaEntrega=t},expression:"fechaEntrega"}}),e.error.fechaEntrega?a("span",{staticStyle:{color:"red"}},[e._v(" Este "+e._s(e.error.fechaEntrega[0])+" ")]):e._e()],1),a("b-form-group",{attrs:{label:"Ingresa el estado actual del libro"}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:e.estadoRetiro,callback:function(t){e.estadoRetiro=t},expression:"estadoRetiro"}})],1)],1)])])},h=[],v=(a("7db0"),a("789e")),g=a("94d8"),j=a("fe27"),_={data:function(){return{selectedAlumno:"",selectedLibro:"",estadoRetiro:"El libro se encuentra en perfectas condiciones.",infoAlumno:[],infoLibro:[],fechaEntrega:"",context:null,error:{idLibro:"",idAlumno:"",fechaEntrega:""},msg:"",variant:"",cantidadLibros:"",loadCargaPedido:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(s["c"])("alumnos",["dataAlumnos"])),Object(s["c"])("libros",["jsonLibros"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pedidos",["addPedido"])),Object(s["b"])("pages",["addPedidoData"])),{},{cickCalendario:function(){this.error.fechaEntrega=!1},handleEnvio:function(e){e.preventDefault(),this.sendPedido()},sendPedido:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,n,r,s,c,d,l,u,b,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.selectedLibro.idLibro,o=e.selectedAlumno.idAlumno,n={idLibro:a,idAlumno:o,fechaEntrega:e.fechaEntrega,estadoRetiro:e.estadoRetiro},e.loadCargaPedido=!0,t.next=6,Object(j["a"])("create-pedido",n,"POST");case 6:r=t.sent,s=r.data,c=s.errores,d=s.msg,l=s.ok,u=s.pedido,b=s.libro,m=s.curso,e.error=c||Object(i["a"])({},e.error),e.loadCargaPedido=!1,l||("libroEncontrado"==d&&Object(v["a"])({msg:"El alumno ya tiene asignado el libro.",title:"Atención",variant:"warning",solid:!0}),"libroSinStock"==d&&Object(v["a"])({msg:"Este libro se encuentra sin stock no podemos realizar la entrega.",title:"Atención",variant:"danger",solid:!0})),l&&(Object(v["a"])({msg:"El n° pedido es el ".concat(u.idPedido),title:"Exito",variant:"primary",solid:!0}),e.infoAlumno.cantidad++,e.infoLibro.cantidad--,e.addPedido(u),e.addPedidoData(Object(i["a"])(Object(i["a"])({},u),{},{fechaEntrega:Object(g["d"])(u.fechaEntrega),fechaRetiro:Object(g["d"])(u.fechaRetiro),nombre:e.infoAlumno.nombre,apellido:e.infoAlumno.apellido,nombreLibro:b.nombreLibro,nombreCurso:m.nombreCurso})));case 13:case"end":return t.stop()}}),t)})))()},seleccionAlumno:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e.idAlumno,t.error.idAlumno=!1,t.infoAlumno=t.dataAlumnos.find((function(e){return e.idAlumno===o})),a.next=5,Object(j["a"])("infoPedidoAlumno/".concat(o));case 5:n=a.sent,r=n.data,t.cantidadLibros=r.totalPedido;case 8:case"end":return a.stop()}}),a)})))()},seleccionLibro:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.error.idLibro=!1,a.next=3,Object(j["a"])("infoLibroId/".concat(e));case 3:o=a.sent,n=o.data,t.infoLibro=n.libro;case 6:case"end":return a.stop()}}),a)})))()},onContext:function(e){this.context=e},resetModal:function(){this.selectedAlumno="",this.selectedLibro="",this.fechaEntrega="",this.infoAlumno=[],this.infoLibro=[],this.msg="",this.error={rutAlumno:"",fechaEntrega:""}}})},O=_,C=(a("3a94"),a("2877")),L=Object(C["a"])(O,p,h,!1,null,"88b2c242",null),E=L.exports,P=a("3232"),k={components:{cardPedido:m["a"],paginationPedido:b["a"],buscadorPedido:f["a"],modalNuevoPedido:E},data:function(){return{puSkeleton:!0}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("cursos",["activeCurso"])),Object(s["c"])("alumnos",["activeAlumno"])),Object(s["c"])("pedidos",["buscador"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["loadItems"])),Object(s["b"])("pages",["changePagination"])),Object(s["b"])("pages",["loadData"])),Object(s["b"])("pages",["changePedido"])),{},{getTable:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.changePedido(!1),e.next=3,Object(P["b"])({activeAlumno:t.activeAlumno,buscador:t.buscador,idCursos:t.activeCurso,page:1});case 3:a=e.sent,o=a.data,n=Object(P["a"])(o.getPedidos.data),t.loadData(n),t.changePedido(!0),t.loadItems(o.pagination),t.puSkeleton=!1;case 10:case"end":return e.stop()}}),e)})))()}}),mounted:function(){this.getTable()}},w=k,x=(a("7608"),Object(C["a"])(w,l,u,!1,null,null,null)),A=x.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[e._m(0),e.tablaPedidos?a("PuSkeleton",{attrs:{count:2}}):e._e(),e.carga?a("apexchart",{attrs:{type:"donut",width:"350px",options:e.chartOptions,series:e.series}}):e._e()],1)])},R=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"header-title mb-4"},[e._v(" Libros mas pedidos ultimamente ")])])}],S={data:function(){return{series:[],chartOptions:{chart:{width:350,type:"donut"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:350},legend:{show:!1}}}],legend:{position:"bottom"}},carga:!1}},computed:{tablaPedidos:function(){return!(this.chartOptions.labels.length>0)}},methods:{loadChart:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("api/librosPedidos");case 2:a=t.sent,o=a.data,n=o.conjuntoLibros,r=n.map((function(e){return e.cantidad})),i=n.map((function(e){return e.nombreLibro})),e.series=r,e.chartOptions.labels=i,e.carga=!0;case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadChart()}},D=S,T=Object(C["a"])(D,y,R,!1,null,"3ab2684e",null),$=T.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"header-title mb-4"},[e._v(" Libros sin stock ")]),0===e.librosSinstock.length?a("b-alert",{attrs:{show:"",variant:"info"}},[e._v("No se encuentran libros sin stock.")]):a("b-table",{attrs:{striped:"",hover:"",items:e.librosSinstock,fields:e.fieldsLibro},scopedSlots:e._u([{key:"cell(id_libro)",fn:function(t){return[e._v(" "+e._s(t.item.idLibro)+" ")]}},{key:"cell(nombre_libro)",fn:function(t){return[e._v(" "+e._s(t.item.nombreLibro)+" ")]}}])})],1)])},M=[],N=(a("4de4"),{data:function(){return{itemsLibro:[],fieldsLibro:["id_libro","nombre_libro","cantidad"]}},computed:Object(i["a"])({tablaLibro:function(){return!(this.itemsLibro.length>0)},librosSinstock:function(){return this.jsonLibros.filter((function(e){return 0===e.cantidad}))}},Object(s["c"])("libros",["jsonLibros"]))}),F=N,z=Object(C["a"])(F,I,M,!1,null,null,null),H=z.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-alert",{attrs:{show:"",variant:"info"}},[a("div",{staticClass:"alerta"},[a("h4",{staticClass:"alert-heading"},[e._v(" "+e._s(e.filtroMes.length)+" Pedidos este mes. ")]),a("p",[e._v(" Totalidad de libros solicitados este mes ")])])])],1),a("div",{staticClass:"col-md-12"},[a("b-alert",{attrs:{show:"",variant:"success"}},[a("div",{staticClass:"alerta"},[a("h4",{staticClass:"alert-heading"},[e._v(" "+e._s(e.jsonLibros.reduce((function(e,t){return e+t.cantidad}),0))+" Libros en el sistema. ")]),a("p",[e._v(" Totalidad de libros en el sistema de biblioteca. ")])])])],1)])},q=[],B=(a("ac1f"),a("1276"),{data:function(){return{}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("alumnos",["dataAlumnos"])),Object(s["c"])("libros",["jsonLibros"])),Object(s["c"])("pedidos",["jsonPedido"])),{},{filtroMes:function(){var e=this,t=Object(g["b"])(),a=t.primerDiaMes,o=t.ultimoDiaMes;return this.jsonPedido.filter((function(t){return e.formatFecha(t.created_at)>a&&e.formatFecha(t.created_at)<o}))}}),methods:{formatFecha:function(e){e=e.split(" ");return e[0]}}}),G=B,K=Object(C["a"])(G,J,q,!1,null,null,null),Q=K.exports,U={components:{chartPedidos:$,tablasStock:H,headInfoPedido:Q,historialPedido:A},data:function(){return{}},computed:{currentDateTime:function(){return d()().format("LL")}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("alumnos",["uploadAlumnos"])),Object(s["b"])("pedidos",["updatePedido"])),Object(s["b"])("libros",["uploadDataLibros"])),Object(s["b"])("menu",["updateMenu"])),Object(s["b"])("menu",["updateTitulo"])),{},{loadPedidos:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(j["a"])("pedidosRecientes");case 2:a=t.sent,o=a.data,n=o.getPedido,r=n.map((function(e){return Object(i["a"])(Object(i["a"])({nombreAlumno:"".concat(e.nombre," ").concat(e.apellido)},e),{},{fechaEntrega:Object(g["c"])(e.fechaEntrega)})})),e.updatePedido(r);case 7:case"end":return t.stop()}}),t)})))()},loadAlumnos:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(j["a"])("alumnos");case 2:a=t.sent,o=a.data,n=o.alumnos,e.uploadAlumnos(n);case 6:case"end":return t.stop()}}),t)})))()},loadLibros:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(j["a"])("libros");case 2:a=t.sent,o=a.data,n=o.libros,e.uploadDataLibros(n);case 6:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.loadPedidos(),this.loadAlumnos(),this.loadLibros(),this.updateTitulo("home"),this.updateMenu([{urlTolbar:"index",nameToolbar:"Inicio"}])}},V=U,W=Object(C["a"])(V,o,n,!1,null,null,null);t["default"]=W.exports}}]);
//# sourceMappingURL=chunk-fd73acc4.8a67b9af.js.map