(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d33f844a"],{"0092":function(t,e,a){},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7");function n(t,e,a,n,r,o,i){try{var s=t[o](i),c=s.value}catch(d){return void a(d)}s.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var i=t.apply(e,a);function s(t){n(i,r,o,s,c,"next",t)}function c(t){n(i,r,o,s,c,"throw",t)}s(void 0)}))}}},"4cef":function(t,e,a){"use strict";var n=a("0092"),r=a.n(n);r.a},6869:function(t,e,a){},"789e":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("2b0e"),r=function(t){var e=t.msg,a=t.title,r=t.variant,o=t.solid,i=new n["default"];return i.$bvToast.toast(e,{title:a,variant:r,solid:o})}},"85f5":function(t,e,a){},"96cf":function(t,e,a){var n=function(t){"use strict";var e,a=Object.prototype,n=a.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(S){c=function(t,e,a){return t[e]=a}}function d(t,e,a,n){var r=e&&e.prototype instanceof h?e:h,o=Object.create(r.prototype),i=new k(n||[]);return o._invoke=w(t,a,i),o}function l(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(S){return{type:"throw",arg:S}}}t.wrap=d;var u="suspendedStart",f="suspendedYield",m="executing",b="completed",p={};function h(){}function v(){}function g(){}var _={};_[o]=function(){return this};var j=Object.getPrototypeOf,O=j&&j(j(A([])));O&&O!==a&&n.call(O,o)&&(_=O);var P=g.prototype=h.prototype=Object.create(_);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function a(r,o,i,s){var c=l(t[r],t,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"===typeof u&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){a("next",t,i,s)}),(function(t){a("throw",t,i,s)})):e.resolve(u).then((function(t){d.value=t,i(d)}),(function(t){return a("throw",t,i,s)}))}s(c.arg)}var r;function o(t,n){function o(){return new e((function(e,r){a(t,n,e,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function w(t,e,a){var n=u;return function(r,o){if(n===m)throw new Error("Generator is already running");if(n===b){if("throw"===r)throw o;return R()}a.method=r,a.arg=o;while(1){var i=a.delegate;if(i){var s=C(i,a);if(s){if(s===p)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===u)throw n=b,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=m;var c=l(t,e,a);if("normal"===c.type){if(n=a.done?b:f,c.arg===p)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n=b,a.method="throw",a.arg=c.arg)}}}function C(t,a){var n=t.iterator[a.method];if(n===e){if(a.delegate=null,"throw"===a.method){if(t.iterator["return"]&&(a.method="return",a.arg=e,C(t,a),"throw"===a.method))return p;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(n,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,p;var o=r.arg;return o?o.done?(a[t.resultName]=o.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,p):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,p)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function A(t){if(t){var a=t[o];if(a)return a.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function a(){while(++r<t.length)if(n.call(t,r))return a.value=t[r],a.done=!1,a;return a.value=e,a.done=!0,a};return i.next=i}}return{next:R}}function R(){return{value:e,done:!0}}return v.prototype=P.constructor=g,g.constructor=v,v.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(P),t},t.awrap=function(t){return{__await:t}},y(E.prototype),E.prototype[i]=function(){return this},t.AsyncIterator=E,t.async=function(e,a,n,r,o){void 0===o&&(o=Promise);var i=new E(d(e,a,n,r),o);return t.isGeneratorFunction(a)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(P),c(P,s,"Generator"),P[o]=function(){return this},P.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var n=e.pop();if(n in t)return a.value=n,a.done=!1,a}return a.done=!0,a}},t.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function r(n,r){return s.type="throw",s.arg=t,a.next=n,r&&(a.method="next",a.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(c&&d){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),L(a),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var r=n.arg;L(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:A(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},c814:function(t,e,a){"use strict";var n=a("85f5"),r=a.n(n);r.a},d504:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 mb-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[t._m(0),a("p",{staticClass:"text-muted"},[t._v(" "+t._s(t.currentDateTime())+" ")])]),t._m(1)])])]),a("br"),a("headPedido"),a("chartPedidos"),a("tablasStock",{staticClass:"mt-2 mb-2"})],1),a("div",{staticClass:"col-md-9"},[a("pedidoAnual")],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",[a("i",{staticClass:"fas fa-university"}),t._v(" Colegio Cumbres ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-5 ml-auto"},[a("div",[a("img",{staticClass:"img-fluid",attrs:{src:"https://im0-tub-com.yandex.net/i?id=a9ab8ad65c5e6b8d6f8d93d4749f84f3&n=13",alt:""}})])])}],o=(a("99af"),a("d81d"),a("96cf"),a("1da1")),i=a("5530"),s=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-xl-2 "},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-nuevoPedido",modifiers:{"modal-nuevoPedido":!0}}],staticClass:"w-100",attrs:{variant:"outline-info"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Crear pedido ")])],1)]),t.tablaAlumnos?a("PuSkeleton",{attrs:{count:5}}):a("v-client-table",{attrs:{data:t.jsonPedido,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"estado",fn:function(e){return 1==e.row.estado?a("b-badge",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-estadoPedido",modifiers:{"modal-estadoPedido":!0}}],staticStyle:{cursor:"pointer"},attrs:{variant:"warning"},on:{click:function(a){return t.enviarDatosPedido(e.row.idPedido)}}},[t._v(" Pendiente ")]):a("b-badge",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-estadoPedido",modifiers:{"modal-estadoPedido":!0}}],staticStyle:{cursor:"pointer"},attrs:{slot:"estado",variant:"primary"},on:{click:function(a){return t.enviarDatosPedido(e.row.idPedido)}},slot:"estado"},[t._v(" Entregado ")])}}],null,!0)})],1)]),a("modalEstadoPedido",{ref:"modalEstadoPedido"}),a("modalNuevoPedido")],1)])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xl-10"},[a("h5",{staticClass:"header-title"},[t._v(" Tabla de pedidos en el a√±o ")])])}],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"modal-estadoPedido"},on:{show:t.resetModal,ok:t.handleEnvio},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("span",[t._v("Cambiar el estado del pedido")])]},proxy:!0},{key:"modal-footer",fn:function(e){var n=e.ok,r=e.cancel;return[a("b-button",{on:{click:function(t){return r()}}},[t._v(" Cancelar ")]),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return n()}}},[t._v(" Aceptar ")])]}}])},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"col-md-12"},[a("h4",[t._v(t._s(t.pedido.nombreLibro))]),a("li",{staticClass:"liNone"},[t._v(" Nombre Alumno : "),a("span",{staticClass:"spanGreen"},[t._v(" "+t._s(t.pedido.nombre)+" "+t._s(t.pedido.apellido)+" ")])]),a("li",{staticClass:"liNone"},[t._v(" Fecha Limite Entrega: "),a("span",{staticClass:"spanGreen"},[t._v(" "+t._s(t.pedido.fechaEntrega)+" ")])]),a("li",{staticClass:"liNone"},[t._v(" Estado Pedido : "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"form-select",attrs:{name:"select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]}}},t._l(t.options,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),0)]),2===t.selected?a("li",{staticClass:"liNone"},[a("label",{staticClass:"form-label"},[t._v("Estado Libro:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pedido.estadoEntrega,expression:"pedido.estadoEntrega"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.pedido.estadoEntrega},on:{input:function(e){e.target.composing||t.$set(t.pedido,"estadoEntrega",e.target.value)}}})]):t._e()])])])},u=[],f=a("789e"),m={data:function(){return{pedido:"",estado:{pendiente:!1,entregado:!1},selected:"",options:[{text:"Pendiente",value:1},{text:"Entregado",value:2}]}},computed:Object(i["a"])({},Object(s["c"])("pages",["active"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["changeActivePedido"])),Object(s["b"])("pages",["updateEstadoPedido"])),{},{sendPedido:function(){this.pedido=Object(i["a"])(Object(i["a"])({},this.active),{},{estadoEntrega:null===this.active.estadoEntrega?"El libro se encuentra en el mismo estado como se entrego.":this.active.estadoEntrega});var t=this.pedido.estado;this.selected=1==t?1:2},handleEnvio:function(t){t.preventDefault(),this.formEstado()},formEstado:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={idPedido:t.pedido.idPedido,estado:t.selected,estadoEntrega:2===t.selected?t.pedido.estadoEntrega:null},e.next=3,t.axios.post("api/updateEstadoLibro",a);case 3:n=e.sent,r=n.data,o=r.updatePedido,t.updateEstadoPedido(o),t.changeActivePedido(o),Object(f["a"])({msg:"Felicitaciones el estado ha cambiado a ".concat(1==t.selected?"Pendiente":"Entregado"," "),title:"Exito",variant:"success",solid:!0});case 9:case"end":return e.stop()}}),e)})))()},resetModal:function(){}})},b=m,p=(a("fcbb"),a("2877")),h=Object(p["a"])(b,l,u,!1,null,"4213b1ee",null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"modal-nuevoPedido"},on:{show:t.resetModal,ok:t.handleEnvio},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("h5",{staticClass:"modal-title"},[t._v("Creaci√≥n nuevo pedido")])]},proxy:!0},{key:"modal-footer",fn:function(e){var n=e.ok;return[t.loadCargaPedido?a("b-button",{attrs:{block:"",variant:"primary"}},[a("b-spinner",{attrs:{small:"",type:"grow"}}),t._v(" Cargando... ")],1):a("b-button",{attrs:{block:"",variant:"primary"},on:{click:function(t){return n()}}},[t._v(" Nuevo Pedido ")])]}}])},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body"},[t.msg.length>0?a("b-alert",{attrs:{show:"",variant:t.variant}},[t._v(" "+t._s(t.msg)+" ")]):t._e(),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Ingresa el rut del alumno."}},[a("v-select",{attrs:{placeholder:"Haz click para seleccionar alumno...",options:t.dataAlumnos,label:"dataAlumno"},on:{input:function(e){return t.seleccionAlumno(t.selectedAlumno)}},scopedSlots:t._u([{key:"options",fn:function(e){return[t._v(" "+t._s(e.dataAlumno)+" ")]}}]),model:{value:t.selectedAlumno,callback:function(e){t.selectedAlumno=e},expression:"selectedAlumno"}}),t.error.idAlumno?a("span",{staticStyle:{color:"red"}},[t._v(" Este "+t._s(t.error.idAlumno[0])+" ")]):t._e(),a("br"),t.infoAlumno.idAlumno?a("div",{staticStyle:{"background-color":"#EEEEEE","border-radius":"0.25rem",padding:"0.75rem 1.25rem"}},[a("p",[t._v(" Este alumno cuenta con "),a("strong",[t._v(t._s(t.cantidadLibros))]),t._v(" pedidos pendientes. ")]),a("p",[t._v(" #"+t._s(t.infoAlumno.idAlumno)+" - "+t._s(t.infoAlumno.nombre)+" "+t._s(t.infoAlumno.apellido)+" "+t._s(t.infoAlumno.numeroDocumento)+" ")])]):t._e()],1),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Ingresa el nombre del libro."}},[a("v-select",{staticClass:"form-select",attrs:{placeholder:"Haz click para seleccionar el libro...",options:t.jsonLibros,label:"dataLibro"},on:{input:function(e){return t.seleccionLibro(t.selectedLibro.idLibro)}},scopedSlots:t._u([{key:"options",fn:function(e){return[t._v(" "+t._s(e.dataLibro)+" ")]}}]),model:{value:t.selectedLibro,callback:function(e){t.selectedLibro=e},expression:"selectedLibro"}}),t.error.idLibro?a("span",{staticStyle:{color:"red"}},[t._v(" Este "+t._s(t.error.idLibro[0])+" ")]):t._e(),a("br"),t.infoLibro.idLibro?a("div",{staticStyle:{"background-color":"#EEEEEE","border-radius":"0.25rem",padding:"0.75rem 1.25rem"}},[t._v(" Este Libro se encuentra con stock de: "+t._s(t.infoLibro.cantidad)+" ")]):t._e()],1),a("b-form-group",{staticStyle:{"margin-top":"20px"},attrs:{label:"Fecha Entrega"}},[a("b-calendar",{attrs:{locale:"es",block:""},on:{context:t.onContext,input:function(e){return t.cickCalendario()}},model:{value:t.fechaEntrega,callback:function(e){t.fechaEntrega=e},expression:"fechaEntrega"}}),t.error.fechaEntrega?a("span",{staticStyle:{color:"red"}},[t._v(" Este "+t._s(t.error.fechaEntrega[0])+" ")]):t._e()],1),a("b-form-group",{attrs:{label:"Ingresa el estado actual del libro"}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.estadoRetiro,callback:function(e){t.estadoRetiro=e},expression:"estadoRetiro"}})],1)],1)])])},_=[],j=(a("7db0"),a("ac1f"),a("1276"),a("c1df")),O=a.n(j);a("898b");var P=function(t){var e=t.split(" "),a=e[0],n=a.split("-"),r="".concat(n[0],"/").concat(n[1],"/").concat(n[2]),o=O()(new Date(r));o.format("LL");return o.format("LL")},y=function(){var t=O()().startOf("month").format("YYYY-MM-DD"),e=O()().endOf("month").format("YYYY-MM-DD");return{primerDiaMes:t,ultimoDiaMes:e}},E={data:function(){return{selectedAlumno:"",selectedLibro:"",estadoRetiro:"El libro se encuentra en perfectas condiciones.",infoAlumno:[],infoLibro:[],fechaEntrega:"",context:null,error:{idLibro:"",idAlumno:"",fechaEntrega:""},msg:"",variant:"",cantidadLibros:"",loadCargaPedido:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(s["c"])("alumnos",["dataAlumnos"])),Object(s["c"])("libros",["jsonLibros"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pedidos",["addPedido"])),Object(s["b"])("pages",["addPedidoData"])),{},{cickCalendario:function(){this.error.fechaEntrega=!1},handleEnvio:function(t){t.preventDefault(),this.sendPedido()},sendPedido:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,s,c,d,l,u,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.selectedLibro.idLibro,n=t.selectedAlumno.idAlumno,r={idLibro:a,idAlumno:n,fechaEntrega:t.fechaEntrega,estadoRetiro:t.estadoRetiro},t.loadCargaPedido=!0,e.next=6,t.axios.post("api/create-pedido",r);case 6:o=e.sent,s=o.data,c=s.errores,d=s.msg,l=s.ok,u=s.pedido,m=s.libro,b=s.curso,t.error=c||Object(i["a"])({},t.error),t.loadCargaPedido=!1,l||("libroEncontrado"==d&&Object(f["a"])({msg:"El alumno ya tiene asignado el libro.",title:"Atenci√≥n",variant:"warning",solid:!0}),"libroSinStock"==d&&Object(f["a"])({msg:"Este libro se encuentra sin stock no podemos realizar la entrega.",title:"Atenci√≥n",variant:"danger",solid:!0})),l&&(Object(f["a"])({msg:"El n¬∞ pedido es el ".concat(u.idPedido),title:"Exito",variant:"primary",solid:!0}),t.infoAlumno.cantidad++,t.infoLibro.cantidad--,console.log(u),t.addPedido(u),t.addPedidoData(Object(i["a"])(Object(i["a"])({},u),{},{fechaEntrega:P(u.fechaEntrega),fechaRetiro:P(u.fechaRetiro),nombre:t.infoAlumno.nombre,apellido:t.infoAlumno.apellido,nombreLibro:m.nombreLibro,nombreCurso:b.nombreCurso})));case 13:case"end":return e.stop()}}),e)})))()},seleccionAlumno:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.idAlumno,e.error.idAlumno=!1,e.infoAlumno=e.dataAlumnos.find((function(t){return t.idAlumno===n})),a.next=5,e.axios.get("api/infoPedidoAlumno/".concat(n));case 5:r=a.sent,o=r.data,i=o.totalPedido,e.cantidadLibros=i;case 9:case"end":return a.stop()}}),a)})))()},seleccionLibro:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.error.idLibro=!1,a.next=3,e.axios.get("api/infoLibroId/".concat(t));case 3:n=a.sent,r=n.data,o=r.libro,e.infoLibro=o;case 7:case"end":return a.stop()}}),a)})))()},onContext:function(t){this.context=t},resetModal:function(){this.selectedAlumno="",this.selectedLibro="",this.fechaEntrega="",this.infoAlumno=[],this.infoLibro=[],this.msg="",this.error={rutAlumno:"",fechaEntrega:""}}}),created:function(){}},w=E,C=(a("c814"),Object(p["a"])(w,g,_,!1,null,"6e965b74",null)),x=C.exports,L={components:{modalEstadoPedido:v,modalNuevoPedido:x},data:function(){return{columns:["idPedido","nombreAlumno","nombreLibro","fechaEntrega","estado"],options:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(s["c"])("pedidos",["jsonPedido"])),{},{tablaAlumnos:function(){return!(this.jsonPedido.length>0)}}),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])("pedidos",["activePedido"])),{},{enviarDatosPedido:function(t){this.activePedido(t),this.$refs.modalEstadoPedido.sendPedido()}})},k=L,A=Object(p["a"])(k,c,d,!1,null,"92d8a8e0",null),R=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"header-title pb-2"},[t._v(" Historial de pedidos ")]),a("div",{staticClass:"row mb-2"},[t._m(0),a("div",{staticClass:"col-2"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-nuevoPedido",modifiers:{"modal-nuevoPedido":!0}}],staticClass:"float-right",attrs:{variant:"outline-info"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Crear pedido ")])],1)]),t.puSkeleton?a("PuSkeleton",{attrs:{count:5}}):a("div",[a("hr"),a("buscadorPedido"),a("cardPedido"),a("paginationPedido")],1),a("modalNuevoPedido")],1)])])])},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-10"},[a("label",{staticClass:"text-muted"},[t._v("A continuacion ver√°s el listado de libros arrendados segun su fecha correspondiente. ")])])}],N=a("e59c"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[t.pagination.current_page>1?a("li",[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[t._v("Atras")])]):t._e(),t._l(t.numPaginas,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:[e===t.pagination.current_page&&"active"]},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(t._s(e))])])})),t.pagination.current_page<t.pagination.last_page?a("li",[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[t._v("Siguiente")])]):t._e()],2),a("p",{staticClass:"text-center"},[t._v(t._s(t.dataPage.length)+" Items encontrados")])])])},T=[],I={data:function(){return{pageNumber:{}}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("pages",["pagination"])),Object(s["c"])("pages",["offset"])),Object(s["c"])("pages",["dataPage"])),Object(s["c"])("pages",["loadPedido"])),{},{numPaginas:function(){return Object(N["a"])(this.offset,this.pagination)}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["loadItems"])),Object(s["b"])("pages",["changePagination"])),Object(s["b"])("pages",["loadData"])),Object(s["b"])("pages",["changePedido"])),{},{getTable:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.changePedido(!1),a.next=3,e.axios.get("api/pedidosAll?page=".concat(t));case 3:n=a.sent,r=n.data,o=r.getPedidos.data,s=o.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{fechaEntrega:P(t.fechaEntrega),fechaRetiro:P(t.fechaRetiro)})})),e.loadData(s),e.changePedido(!0),e.loadItems(r.pagination),e.pageNumber=Object(N["a"])(e.offset,r.pagination);case 11:case"end":return a.stop()}}),a)})))()},changePage:function(t){this.changePagination(t),this.getTable(t)}})},M=I,F=Object(p["a"])(M,$,T,!1,null,null,null),G=F.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[0===t.dataPage.length?a("div",{staticClass:"col-md-12"},[t._m(0)]):t._e(),t._l(t.dataPage,(function(e){return a("div",{key:e.id,staticClass:"col-12 mb-2",class:{"animate__animated animate__fadeInDown":t.loadPedido}},[a("div",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-estadoPedido",modifiers:{"modal-estadoPedido":!0}}],staticClass:"col-12 ms-3 rounded cardPedido",on:{click:function(a){return t.enviarDatosPedido(e.idPedido)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("label",{staticClass:"lblPedido"},[t._v(t._s(e.nombreLibro))])]),a("div",{staticClass:"col-4 text-center"},[1==e.estado?a("span",{staticClass:"badge badge-warning"},[t._v(" Pendiente ")]):a("span",{staticClass:"badge badge-primary"},[t._v(" Entregado ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 infoPedido"},[a("span",{staticClass:"text-muted"},[t._v("Alumno ")]),a("br"),a("label",{staticClass:"lblPedido"},[t._v(" "+t._s(e.nombre)+" "+t._s(e.apellido)+" - ")]),a("span",[t._v(" "+t._s(e.nombreCurso)+" ")])]),a("div",{staticClass:"col-4 text-center detallePedido"},[t._m(1,!0),a("br"),a("p",{staticClass:"fechaEntrega"},[t._v(t._s(e.fechaRetiro))]),a("label",{staticClass:"text-muted textResena"},[t._v(t._s(null===e.estadoRetiro?"-":e.estadoRetiro)+" ")])]),a("div",{staticClass:"col-4 text-center"},[t._m(2,!0),a("br"),a("label",{staticClass:"fechaEntrega"},[t._v(" "+t._s(e.fechaEntrega)+" ")]),a("br"),a("label",{staticClass:"text-muted textResena"},[t._v(t._s(null===e.estadoEntrega?"-":e.estadoEntrega)+" ")])])])]),a("br")])})),a("modalEstadoPedido",{ref:"modalEstadoPedido"})],2)},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 ms-3 rounded bg-light text-center p-5"},[a("p",[a("i",{staticClass:"fas fa-ban"}),t._v(" No se encontraron resultados.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-muted"},[a("i",{staticClass:"far fa-calendar-alt"}),t._v(" Fecha Retiro")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-muted"},[a("i",{staticClass:"far fa-calendar-alt"}),t._v(" Fecha Limite Entrega")])}],z={components:{modalEstadoPedido:v},data:function(){return{pedidos:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(s["c"])("pages",["dataPage"])),Object(s["c"])("pages",["loadPedido"])),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["activePedido"])),{},{enviarDatosPedido:function(t){this.activePedido(t),this.$refs.modalEstadoPedido.sendPedido()}})},q=z,B=(a("e293"),Object(p["a"])(q,Y,H,!1,null,"6ff5da6c",null)),J=B.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mb-2"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.buscador,expression:"buscador"}],staticClass:"form-control searchProducto w-100",attrs:{type:"text",placeholder:"Buscar Pedido",autoComplete:"off"},domProps:{value:t.buscador},on:{keyup:t.searchProducto,input:function(e){e.target.composing||(t.buscador=e.target.value)}}})])])},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"searchNav"},[a("i",{staticClass:"fas fa-search"})])}],U={data:function(){return{buscador:""}},computed:{},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["loadItems"])),Object(s["b"])("pages",["loadData"])),{},{searchProducto:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/searchPedido?buscador=".concat(t.buscador));case 2:a=e.sent,n=a.data,r=n.resultadoBusqueda.data,o=r.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{fechaEntrega:P(t.fechaEntrega),fechaRetiro:P(t.fechaRetiro)})})),t.loadData(o),t.loadItems(n.pagination),Object(N["a"])(t.offset,n.pagination);case 9:case"end":return e.stop()}}),e)})))()}})},V=U,W=(a("4cef"),Object(p["a"])(V,K,Q,!1,null,"75ab6f67",null)),X=W.exports,Z={components:{cardPedido:J,paginationPedido:G,buscadorPedido:X,modalNuevoPedido:x},data:function(){return{puSkeleton:!0}},computed:{},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("pages",["loadItems"])),Object(s["b"])("pages",["changePagination"])),Object(s["b"])("pages",["loadData"])),Object(s["b"])("pages",["changePedido"])),{},{getTable:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.changePedido(!1),a.next=3,e.axios.get("api/pedidosAll?page=".concat(t));case 3:n=a.sent,r=n.data,o=r.getPedidos.data,s=o.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{fechaEntrega:P(t.fechaEntrega),fechaRetiro:P(t.fechaRetiro)})})),e.loadData(s),e.changePedido(!0),e.loadItems(r.pagination),e.puSkeleton=!1,Object(N["a"])(e.offset,r.pagination);case 12:case"end":return a.stop()}}),a)})))()}}),mounted:function(){this.getTable()}},tt=Z,et=Object(p["a"])(tt,S,D,!1,null,null,null),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[t._m(0),t.tablaPedidos?a("PuSkeleton",{attrs:{count:2}}):t._e(),t.carga?a("apexchart",{attrs:{type:"donut",width:"350px",options:t.chartOptions,series:t.series}}):t._e()],1)])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"header-title mb-4"},[t._v(" Libros mas pedidos ultimamente ")])])}],ot={data:function(){return{series:[],chartOptions:{chart:{width:350,type:"donut"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:350},legend:{show:!1}}}],legend:{position:"bottom"}},carga:!1}},computed:{tablaPedidos:function(){return!(this.chartOptions.labels.length>0)}},methods:{loadChart:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/librosPedidos");case 2:a=e.sent,n=a.data,r=n.conjuntoLibros,o=r.map((function(t){return t.cantidad})),i=r.map((function(t){return t.nombreLibro})),t.series=o,t.chartOptions.labels=i,t.carga=!0;case 10:case"end":return e.stop()}}),e)})))()}},created:function(){this.loadChart()}},it=ot,st=Object(p["a"])(it,nt,rt,!1,null,"22131d92",null),ct=st.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"header-title mb-4"},[t._v(" Libros sin stock ")]),a("div",{staticClass:"media"},[a("div",{staticClass:"media-body"},[a("p",{staticClass:"text-muted"},[t._v(" Libros que no tienen stock en el sistema ")]),0===t.librosSinstock.length?a("b-alert",{attrs:{show:"",variant:"info"}},[t._v("No se encuentran libros sin stock.")]):a("b-table",{attrs:{striped:"",hover:"",items:t.librosSinstock,fields:t.fieldsLibro},scopedSlots:t._u([{key:"cell(id_libro)",fn:function(e){return[t._v(" "+t._s(e.item.idLibro)+" ")]}},{key:"cell(nombre_libro)",fn:function(e){return[t._v(" "+t._s(e.item.nombreLibro)+" ")]}},{key:"cell(cantidad)",fn:function(){return[t._v(" Sin Stock ")]},proxy:!0}])})],1)])])])},lt=[],ut=(a("4de4"),{data:function(){return{itemsLibro:[],fieldsLibro:["id_libro","nombre_libro","cantidad"]}},computed:Object(i["a"])({tablaLibro:function(){return!(this.itemsLibro.length>0)},librosSinstock:function(){return this.jsonLibros.filter((function(t){return 0===t.cantidad}))}},Object(s["c"])("libros",["jsonLibros"]))}),ft=ut,mt=Object(p["a"])(ft,dt,lt,!1,null,null,null),bt=mt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-alert",{attrs:{show:"",variant:"info"}},[a("div",{staticClass:"alerta"},[a("h4",{staticClass:"alert-heading"},[t._v(" "+t._s(t.filtroMes.length)+" Pedidos este mes. ")]),a("p",[t._v(" Totalidad de libros solicitados este mes ")])])])],1),a("div",{staticClass:"col-md-12"},[a("b-alert",{attrs:{show:"",variant:"success"}},[a("div",{staticClass:"alerta"},[a("h4",{staticClass:"alert-heading"},[t._v(" "+t._s(t.jsonLibros.reduce((function(t,e){return t+e.cantidad}),0))+" Libros en el sistema. ")]),a("p",[t._v(" Totalidad de libros en el sistema de biblioteca. ")])])])],1)])},ht=[],vt={data:function(){return{}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("alumnos",["dataAlumnos"])),Object(s["c"])("libros",["jsonLibros"])),Object(s["c"])("pedidos",["jsonPedido"])),{},{filtroMes:function(){var t=this,e=y(),a=e.primerDiaMes,n=e.ultimoDiaMes;return this.jsonPedido.filter((function(e){return t.formatFecha(e.created_at)>a&&t.formatFecha(e.created_at)<n}))}}),methods:{formatFecha:function(t){t=t.split(" ");return t[0]}}},gt=vt,_t=Object(p["a"])(gt,pt,ht,!1,null,null,null),jt=_t.exports,Ot={components:{tablaPedidoAnual:R,chartPedidos:ct,tablasStock:bt,headPedido:jt,pedidoAnual:at},data:function(){return{}},computed:{},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])("alumnos",["uploadAlumnos"])),Object(s["b"])("pedidos",["updatePedido"])),Object(s["b"])("libros",["uploadDataLibros"])),Object(s["b"])("menu",["updateMenu"])),Object(s["b"])("menu",["updateTitulo"])),{},{loadData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/pedidosRecientes");case 2:a=e.sent,n=a.data,r=n.getPedido,o=r.map((function(e){return Object(i["a"])(Object(i["a"])({nombreAlumno:"".concat(e.nombre," ").concat(e.apellido)},e),{},{fechaEntrega:t.fechaConversion(e.fechaEntrega)})})),t.updatePedido(o);case 7:case"end":return e.stop()}}),e)})))()},loadAlumnos:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/alumnos");case 2:a=e.sent,n=a.data,r=n.alumnos,t.uploadAlumnos(r);case 6:case"end":return e.stop()}}),e)})))()},loadLibros:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/libros");case 2:a=e.sent,n=a.data,r=n.libros,t.uploadDataLibros(r);case 6:case"end":return e.stop()}}),e)})))()},fechaConversion:function(t){var e=new Date(t),a=e.toLocaleDateString("es-ES",{day:"numeric"}),n=e.toLocaleDateString("es-ES",{month:"long"}),r=e.toLocaleDateString("es-ES",{year:"numeric"});return a+" "+n+" "+r},currentDateTime:function(){return O()().format("LL")}}),mounted:function(){this.loadData(),this.loadAlumnos(),this.loadLibros();var t=[{urlTolbar:"index",nameToolbar:"Inicio"}],e="Home";this.updateTitulo(e),this.updateMenu(t)}},Pt=Ot,yt=Object(p["a"])(Pt,n,r,!1,null,null,null);e["default"]=yt.exports},d5f9:function(t,e,a){},e293:function(t,e,a){"use strict";var n=a("6869"),r=a.n(n);r.a},e59c:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=function(t,e){var a=e.total,n=e.current_page,r=e.last_page;if(!a)return[];var o=n-t;o<1&&(o=1);var i=o+2*t;i>=r&&(i=r);var s=[];while(o<=i)s.push(o),o++;return s}},fcbb:function(t,e,a){"use strict";var n=a("d5f9"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-d33f844a.c2afe033.js.map